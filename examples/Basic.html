<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

	<!-- shims -->
	<script src="../inc/shim/Base64.js"></script>
	<script src="../inc/shim/WebAudioAPI.js"></script>
	<script src="../inc/shim/WebMIDIAPI.js"></script>

	<!-- utils -->
	<script src="../inc/dom/request_script.js"></script>
	<script src="../inc/dom/request_xhr.js"></script>
	<script src="../inc/AudioSupports.js"></script>
	<script src="../inc/EventEmitter.js"></script>

	<!-- midi.js -->
	<script src="../js/midi/loader.js"></script>
	<script src="../js/midi/adaptors.js"></script>
	<script src="../js/midi/adaptors-Audio.js"></script>
	<script src="../js/midi/adaptors-AudioAPI.js"></script>
	<script src="../js/midi/adaptors-MIDI.js"></script>
	<script src="../js/midi/channels.js"></script>
	<script src="../js/midi/gm.js"></script>
	<script src="../js/midi/player.js"></script>
	<script src="../js/midi/synesthesia.js"></script>

</head>
<body>
<script>

window.onload = function () {
	MIDI.setup({
		soundfontUrl: "./soundfont/",
		instrument: "acoustic_grand_piano",
		onprogress: function (state, progress) {
			console.log(state, progress);
		}
	}).then(function () {
		var delay = 0; // play one note every quarter second
		var note = 50; // the MIDI note
		var velocity = 127; // how hard the note hits
		// play the note
		MIDI.setVolume(0, 127);
		MIDI.noteOn(0, note, velocity, delay);
		MIDI.noteOff(0, note, delay + 0.75);
	});
};

</script>
</body>
</html>